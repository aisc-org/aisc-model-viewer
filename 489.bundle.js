"use strict";(self.webpackChunkaisc_model_viewer=self.webpackChunkaisc_model_viewer||[]).push([[489,870],{1489:(e,t,n)=>{n.d(t,{qw:()=>m,Xs:()=>w,Kx:()=>v});var i=n(22),s=n(2295),o=n(4231),r=n(5249),a=n(2601);const c={aisc_blue:new i.Q1f("#00558A"),orange:new i.Q1f("#FF8200"),white:new i.Q1f("#FFFFFF"),smokey:new i.Q1f("#58595B"),valley:new i.Q1f("#00746F"),globe:new i.Q1f("#006C93"),smokey_x:new i.Q1f("#333333"),gray_1:new i.Q1f("#F6F6F6"),gray_2:new i.Q1f("#E0E0E0"),gray_3:new i.Q1f("#CACACA"),gray_4:new i.Q1f("#B6B6B6"),black:new i.Q1f("#000000")};class d{constructor(){this.wireframeColor=c.black,this.backgroundColor=c.aisc_blue,this.renderEdges=!0,this.edgeThresholdAngle=20;const e=new o.Z;e.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/"),this.loader=new s.B,this.loader.setDRACOLoader(e),this.scene=new i.Z58,this.scene.background=this.backgroundColor,this.camera=new i.ubm(75),this.addLights(),this.scene.add(this.camera),this.renderer=new i.JeP({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputColorSpace=i.er$,this.controls=new r.N(this.camera,this.renderer.domElement),this.controls.addEventListener("change",this.render.bind(this)),this.controls.update(),matchMedia(`resolution: ${window.devicePixelRatio}dppx`).addEventListener("change",this.updatePixelRatio.bind(this));const t=this.updateCanvasSize.bind(this);this.resizeObserver=new MutationObserver(t),window.addEventListener("resize",t),window.modelViewer=this}destroyContent(){var e;this.destroyGUI(),null===(e=this.titleBlock)||void 0===e||e.destroy(),this.titleBlock=void 0}attachToContainer(e){this.resizeObserver.disconnect(),this.container=e,this.resizeObserver.observe(this.container,{attributeFilter:["style"],childList:!0}),this.updateCanvasSize()}setModelAsCurrent(e,t,n,s=!0,o=25,r){this.clearScene(),this.addLoadingSpinner(),this.loader.load(n,(e=>{const t=(new i.NRn).setFromObject(e.scene),n=t.getSize(new i.Pq0).length(),r=new i.Pq0;s?(t.getCenter(r),e.scene.position.x+=e.scene.position.x-r.x,e.scene.position.y+=e.scene.position.y-r.y,e.scene.position.z+=e.scene.position.z-r.z):r.copy(e.scene.position),this.controls.reset(),this.controls.maxDistance=10*n,this.camera.near=n/100,this.camera.far=100*n,this.camera.updateProjectionMatrix(),this.camera.position.copy(r),this.camera.position.x+=n/2,this.camera.position.y+=n/5,this.camera.position.z+=n/2,this.camera.lookAt(r),this.scene.add(e.scene);let a=[];e.scene.traverse((e=>{var t;e instanceof i.eaF&&(null===(t=e.morphTargetInfluences)||void 0===t?void 0:t.length)&&a.push(e)})),a.length>0&&this.updateGUI(a,o),this.renderEdges&&this.addWireframeToGroup(e.scene,{useMorphed:!0}),this.controls.update(),this.removeLoadingSpinner()})),this.updateCanvasSize(),void 0===this.titleBlock&&(this.titleBlock=new l,this.container.appendChild(this.titleBlock.domElement)),this.titleBlock.update(r||e,t)}addLoadingSpinner(){void 0===this.loadingSpinner?(this.loadingSpinner=document.createElement("div"),this.loadingSpinner.appendChild(document.createElement("div")),this.loadingSpinner.appendChild(document.createElement("div")),this.loadingSpinner.appendChild(document.createElement("div")),this.loadingSpinner.className="loading-spinner",this.container.appendChild(this.loadingSpinner)):this.loadingSpinner.style.visibility="visible"}removeLoadingSpinner(){void 0!==this.loadingSpinner&&(this.loadingSpinner.style.visibility="hidden")}addGUI(){this.destroyGUI(),this.gui=new a.Ay({autoPlace:!1});let e=document.getElementById("gui-wrapper");return null===e&&(e=document.createElement("div"),e.id="gui-wrapper",this.container.appendChild(e)),e.appendChild(this.gui.domElement),this.gui}updateGUI(e,t=25){const n=this.gui?this.gui:this.addGUI(),i={Scale:.5*t};n.controllers.forEach((e=>{e.destroy()}));const s=t=>{e.forEach((e=>{var n;(null===(n=e.morphTargetInfluences)||void 0===n?void 0:n.length)&&(e.morphTargetInfluences.forEach(((e,n,i)=>{i[n]=t})),this.renderEdges&&this.updateWireframe(e,{useMorphed:!0}))})),this.render()};n.add(i,"Scale",0,t,.01).onChange(s),s(i.Scale)}destroyGUI(){void 0!==this.gui&&(this.gui.domElement.remove(),this.gui.destroy(),this.gui=void 0)}addLights(){const e=new i.$p8(16777215,.35*Math.PI),t=new i.ZyN(16777215,.65*Math.PI);t.position.set(1,1,0),this.camera.add(e,t)}addWireframeToGroup(e,t){const n=[],s=e=>{n.includes(e)||(console.log("Updating material..."),e.polygonOffset=!0,e.polygonOffsetFactor=1,e.polygonOffsetUnits=1,e.needsUpdate=!0,n.push(e))};e.traverse((e=>{e instanceof i.eaF&&(e.material instanceof i.imn?s(e.material):e.material.forEach(s),this.updateWireframe(e,t))}))}removeWireframe(e){e.children.forEach((t=>{t instanceof i.DXC&&e.remove(t)}))}updateWireframe(e,t){this.removeWireframe(e);const n=new i.mrM({color:this.wireframeColor,linewidth:1.5}),s=(null==t?void 0:t.useMorphed)?function(e){if(void 0===e.morphTargetInfluences)return e.geometry.clone();if(e.geometry.attributes.position instanceof i.oh6)throw new Error("Geometries using `GLBufferAttribute` are not supported");const t=e.geometry.attributes.position.array.length,n=new Float32Array(t),s=e.morphTargetInfluences[0];for(let i=0;i<t;i++){let t=e.geometry.attributes.position.array[i],o=e.geometry.morphAttributes.position[0].array[i];n[i]=t+s*o}const o=new i.LoY;return o.setIndex(e.geometry.index),o.attributes.position=new i.qtW(n,3),o}(e):e.geometry,o=(null==t?void 0:t.useWireframe)?new i.XJ7(s):new i.TDQ(s,this.edgeThresholdAngle),r=new i.DXC(o,n);e.add(r)}clearScene(){this.scene.traverse((e=>{e instanceof i.YJl&&this.scene.remove(e)}))}updateCanvasSize(){void 0!==this.container&&(console.log("Updating canvas size..."),this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render())}updatePixelRatio(){this.renderer.setPixelRatio(window.devicePixelRatio)}render(){this.renderer.render(this.scene,this.camera)}}class l{constructor(){this.domElement=document.createElement("div"),this.domElement.id="model-title",this.nameElement=document.createElement("h2"),this.nameElement.id="model-name",this.descElement=document.createElement("p"),this.descElement.id="model-desc",this.domElement.appendChild(this.nameElement),this.domElement.appendChild(this.descElement)}update(e,t=""){this.nameElement.innerText=e,this.descElement.innerHTML=t}destroy(){this.domElement.remove()}}var h;!function(e){e[e.Landscape=0]="Landscape",e[e.Portrait=1]="Portrait"}(h||(h={}));class m{constructor(e){this.sidebarIsOpen=!0,this.contentSizingMode=h.Landscape,this.forceTrailingSlash=!0,this.defaultHTML="<p>Select an item from the sidebar.</p>",this.groups=e.groups,this.contributors=e.contributors,this.contentLinkMap=new Map,this.contentScrollState=new Map,this.contentContainer=document.getElementById("content-container"),document.getElementById("header-title").innerHTML=e.title;const t=document.getElementById("sidebar");e.groups.forEach(((n,i)=>{let s=document.createElement("section");s.id="sidebar.section."+n.name.replace(/\s/g,"_");let o=document.createElement("h2"),r=document.createElement("ul");o.innerHTML=n.name,s.appendChild(o),s.appendChild(r),null!=n.items&&n.items.forEach((e=>{r.appendChild(e.createItem()),this.contentLinkMap[e.linkname]=e})),t.appendChild(s),i!==e.groups.length-1&&t.appendChild(document.createElement("hr"))})),t.appendChild(document.createElement("hr"));const n=document.createElement("section");n.className="sidebar-footer",t.appendChild(n);const i=document.createElement("ul");if(n.appendChild(i),(e.addGuideLink||void 0===e.addGuideLink)&&i.appendChild(this.guideTo2dDrawingsLink()),void 0!==this.contributors&&0!==this.contributors.length){const e=this.contributorsContent(),t=new w({name:"credits",content:e});this.contentLinkMap[t.linkname]=t;const n=document.createElement("a");n.href="./#credits",n.innerHTML="credits";const s=document.createElement("li");s.appendChild(n),i.appendChild(s)}window.addEventListener("resize",this.updateDisplayMode.bind(this)),this.updateDisplayMode(),this.contentSizingMode===h.Portrait&&this.toggleSidebar(),document.getElementById("sidebar-toggle").onclick=this.toggleSidebar.bind(this),window.addEventListener("hashchange",this.setCurrentContent.bind(this)),this.setCurrentContent(),window.modelApp=this}updateDisplayMode(){window.innerWidth<window.innerHeight&&this.contentSizingMode===h.Landscape?(this.contentSizingMode=h.Portrait,this.sidebarIsOpen&&(this.contentContainer.style.width="100%")):window.innerWidth>window.innerHeight&&this.contentSizingMode===h.Portrait&&(this.contentSizingMode=h.Landscape,this.sidebarIsOpen&&(this.contentContainer.style.width="calc(100% - 250px)"))}toggleSidebar(){const e=document.getElementById("sidebar");this.sidebarIsOpen?(e.style.visibility="hidden",this.contentSizingMode===h.Landscape&&(this.contentContainer.style.width="100%")):(e.style.visibility="visible",this.contentSizingMode===h.Landscape&&(this.contentContainer.style.width="calc(100% - 250px)")),this.sidebarIsOpen=!this.sidebarIsOpen}setDefaultContent(){const e=document.createElement("section");e.className="html-content",e.innerHTML=this.defaultHTML,this.setContentElement(e)}contributorsContent(){var e;const t=document.createElement("section");t.className="html-content";const n=document.createElement("p");n.innerHTML="This collection was developed by:",t.appendChild(n);const i=document.createElement("ul");return null===(e=this.contributors)||void 0===e||e.forEach((e=>{const t=document.createElement("li");t.innerHTML=e,i.appendChild(t)})),t.appendChild(i),t.innerHTML}guideTo2dDrawingsLink(){return new g({name:"guide to 2d drawings",url:"../guide-to-2d-drawings/#Types-of-drawings",openInNewTab:!1}).createItem()}setContentElement(e){null!=this.currentElement&&this.contentContainer.removeChild(this.currentElement),this.currentElement=e,this.contentContainer.appendChild(this.currentElement),this.contentSizingMode===h.Portrait&&this.sidebarIsOpen&&this.toggleSidebar()}setCurrentContent(){const e=window.location;this.forceTrailingSlash&&!e.pathname.endsWith("/")&&window.location.replace(e.origin+e.pathname+"/"+e.hash);const t=window.location.hash.substr(1),n=this.contentLinkMap[this.currentContent],i=n?n.destroyContent:()=>Promise.resolve(),s=this.contentLinkMap[t];t in this.contentLinkMap?i().then((()=>s.createContent(this.contentContainer))).then((e=>{this.currentElement&&(console.log("Saving",this.currentContent,"scroll position as",this.contentContainer.scrollTop),this.contentScrollState[this.currentContent]=this.contentContainer.scrollTop),this.setContentElement(e),this.currentContent=t,console.log(t,"loaded;","The current scroll position is",this.contentContainer.scrollTop);const n=this.contentScrollState[t];n&&(console.log("Restoring",t,"to scroll position",n),this.contentContainer.scrollBy(n,n),console.log(t,"restored;","The current scroll position is",this.contentContainer.scrollTop))}),(e=>{e instanceof p||console.error(e)})):this.setDefaultContent()}}class p extends Error{}class u{constructor(e){this.name=e,this.linkname=e.replace(/\s/g,"-")}createContent(e){return Promise.reject(new p)}destroyContent(){return Promise.resolve()}}class g extends u{constructor(e){super(e.name),this.url=e.url,this.openInNewTab=e.openInNewTab}createItem(){const e=document.createElement("li"),t=document.createElement("a");return t.href=this.url,t.innerHTML=this.name,this.openInNewTab&&(t.target="_blank",t.rel="noreferrer noopener"),e.appendChild(t),e}}class w extends u{constructor(e){super(e.name),this.classes=["html-content"],this.content=e.content,e.classes&&this.classes.push(...e.classes)}createContent(e){return t=this,n=void 0,s=function*(){const e=document.createElement("section");return e.classList.add(...this.classes),e.innerHTML=this.content,void 0!==window.MathJax.typesetPromise&&(yield window.MathJax.typesetPromise([e])),Promise.resolve(e)},new((i=void 0)||(i=Promise))((function(e,o){function r(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}c((s=s.apply(t,n||[])).next())}));var t,n,i,s}createItem(){const e=document.createElement("li"),t=document.createElement("a");return t.href=`#${this.linkname}`,t.innerHTML=this.name,e.appendChild(t),e}}class v extends u{constructor(e){super(e.name),this.desc="",this.path=e.path,this.centerModel=e.center,this.maxScale=e.maxScale,e.desc&&(this.desc=e.desc),this.title=e.title,void 0===v.viewer&&(v.viewer=new d)}createContent(e){return v.viewer.attachToContainer(e),v.viewer.setModelAsCurrent(this.name,this.desc,this.path,this.centerModel,this.maxScale,this.title),Promise.resolve(v.viewer.renderer.domElement)}destroyContent(){return v.viewer.destroyContent(),Promise.resolve()}createItem(){const e=document.createElement("li"),t=document.createElement("a");return t.href=`#${this.linkname}`,t.innerHTML=this.name,e.appendChild(t),e}}}}]);
//# sourceMappingURL=489.bundle.js.map